#
# This file is auto-generated. Please do not modify!
# Generated by QA Generator v<%= QA_GENERATE_VERSION %>
#
Feature: <%= site["pretty_name"] %> Integration
                                                                                                
<% if site["needs_SPR"] %>
@<%= site["site_name"] %>
Scenario: <%= site["pretty_name"] %> home page is tracked correctly using SPR
	Given I am on the <%= site["site_name"] %> home page
	And I use the SPR key
	Then it should be tracked as a home page                                                               
    <%= expect_recs_rule(site["home_page"]["expected_recs"]) %>

Scenario: <%= site["pretty_name"] %> home page is tracked correctly without SPR
	Given I clear my browser cookies
    And I am on the <%= site["site_name"] %> home page
	Then it should be tracked as an other page
<% else %>
@<%= site["site_name"] %>
Scenario: <%= site["pretty_name"] %> home page is tracked correctly
	Given I am on the <%= site["site_name"] %> home page
	Then it should be tracked as a home page
	<%= expect_recs_rule(site["home_page"]["expected_recs"]) %>
<% end %>

@<%= site["site_name"] %>
Scenario: <%= site["pretty_name"] %> category page is tracked correctly
    Given I am on the <%= site["site_name"] %> category page
    Then it should be tracked as a Category page
    <%= expect_recs_rule(site["category_page"]["expected_recs"]) %>

@<%= site["site_name"] %>
Scenario: <%= site["pretty_name"] %> product page is tracked correctly
    Given I am on the <%= site["site_name"] %> product page
    Then it should be tracked as a product page
    <%= expect_recs_rule(site["product_page"]["expected_recs"]) %>
    
@<%= site["site_name"] %>
Scenario: <%= site["pretty_name"] %> basket page is tracked correctly
    Given I am on the <%= site["site_name"] %> basket page
    Then it should be tracked as a basket page
    <%= expect_recs_rule(site["basket_page"]["expected_recs"]) %>    
       
@<%= site["site_name"] %>
Scenario: <%= site["pretty_name"] %> checkout page is tracked correctly
<% if site["checkout_page"].has_key?("custom_tracking_test") %>
<%= site["checkout_page"]["custom_tracking_test"] %>
<% else %>
	Given I am on the <%= site["site_name"] %> home page
	When I click login
	And I login as "<%= site["username"] %>" using password "<%= site["password"] %>"
	And I go to the product page
	And I add the current product to the basket
	And I go to the basket page
	And I click checkout
	Then it should be tracked as a Checkout page
	<%= expect_recs_rule(site["checkout_page"]["expected_recs"]) %>
<% end %>
  
@<%= site["site_name"] %> 
Scenario: <%= site["pretty_name"] %> search results page is tracked correctly
    Given I am on the <%= site["site_name"] %> homepage
    When I search for "<%= site["valid_search_term"] %>"
    Then it should be tracked as a search results page
    <%= expect_recs_rule(site["searchresults_page"]["expected_recs"]) %>

<% if site["searchresults_page"]["zerosearch_recs"] > 0 %>
#
# SMART-recs
# 		
@<%= site["site_name"] %> @zerosearch
Scenario: <%= site["pretty_name"] %> zero search recommendations are shown
    Given I am on the <%= site["site_name"] %> homepage
    When I search for "<%= site["zero_search_term"] %>"
    Then it should be tracked as a search results page
    <%= expect_recs_rule(site["searchresults_page"]["zerosearch_recs"]) %>
<% end %>

<% if site["has_content"] %>
#
# SMART-content
#
@ctshirts
Scenario: SMART-content links work on on <%= site["pretty_name"] %> homepage
    Given I am on the <%= site["site_name"] %> homepage
    And I click the first SMART-content creative image
    Then it should be tracked as a category page         
<% end %>
